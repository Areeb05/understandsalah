[build]
  # For static frontend deployment only
  publish = "public"
  command = "echo 'Building frontend for Netlify'"

[build.environment]
  NODE_VERSION = "18"

# Inject backend URL into the frontend
[context.production.environment]
  REACT_APP_BACKEND_URL = "https://mm-us-production.up.railway.app"
  BACKEND_URL = "https://mm-us-production.up.railway.app"

# Note: For WebSocket functionality, the Node.js server is deployed
# separately to Railway. The frontend connects to Railway for real-time features.

# Disable server-side rendering/functions for static deployment
[functions]
  directory = ""

[[redirects]]
  from = "/api/*"
  to = "https://mm-us-production.up.railway.app/api/:splat"
  status = 200
